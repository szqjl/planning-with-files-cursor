# Planning with Files 工作流文档

> 将 Manus AI 的规划工作流模式适配到 Cursor IDE

## 🎯 工作流概述

本工作流基于 [planning-with-files](https://github.com/OthmanAdi/planning-with-files) 项目，实现了 Manus AI 的核心规划模式。通过使用持久化的 Markdown 文件进行规划、进度跟踪和知识存储，解决 AI 助手在复杂任务中的上下文丢失问题。

## 🔄 核心工作流：3-File Pattern

对于每个复杂任务，创建**三个文件**：

```
task_plan.md      → 跟踪阶段和进度
notes.md          → 存储研究和发现
[deliverable].md  → 最终交付物
```

### 工作循环

```
1. 创建 task_plan.md，定义目标和阶段
2. 研究 → 保存到 notes.md → 更新 task_plan.md
3. 读取 notes.md → 创建交付物 → 更新 task_plan.md
4. 重要里程碑 → 检查并更新项目文档（如 README.md）
5. 交付最终输出 → 同步项目文档状态
```

**关键洞察**: 通过在每次决策前读取 `task_plan.md`，目标始终保持在注意力窗口中。这就是 Manus 如何在不丢失跟踪的情况下处理 ~50 个工具调用。

## 📋 文件说明

### 1. task_plan.md - 任务计划

**用途**: 跟踪任务的目标、阶段和进度

**结构**:
```markdown
# 任务计划：[任务名称]

## 🎯 项目目标
[清晰描述目标]

## 📋 项目阶段
- [x] Phase 1: [阶段名称] ✅
- [ ] Phase 2: [阶段名称] (CURRENT)
- [ ] Phase 3: [阶段名称]

## 📊 当前状态
**当前阶段**: Phase X
**下一步行动**: [具体行动]

## 🔄 工作流循环
[说明工作流步骤]

## 🐛 已知问题
[记录遇到的问题]

## ✅ 已完成
[已完成的事项]
```

**更新时机**:
- 任务开始时创建
- 每个阶段完成后更新复选框
- 遇到问题时记录
- 完成重要里程碑时更新状态
- **重要里程碑时同步更新项目文档**（如 README.md）

### 2. notes.md - 研究笔记

**用途**: 存储研究、发现、想法和问题解决方案

**结构**:
```markdown
# 研究笔记：[任务名称]

## 📚 参考资料
[相关链接和资源]

## 🔍 研究内容
[研究过程和发现]

## 💡 发现和想法
[重要洞察]

## 🐛 遇到的问题
[问题和解决方案]

## 📝 待验证假设
[需要验证的想法]
```

**更新时机**:
- 进行研究时追加内容
- 发现重要信息时记录
- 遇到问题时记录
- 验证假设时更新

### 3. [deliverable].md - 交付物

**用途**: 最终输出文件（根据任务类型而定）

**示例**:
- `summary.md` - 研究总结
- `design.md` - 设计方案
- `implementation.md` - 实现文档
- `README.md` - 项目说明

## 🛠️ 在 Cursor 中使用

### 自动触发

当你在 Cursor 中执行以下操作时，工作流会自动激活：

- 开始复杂任务（3+ 步骤）
- 提到"规划"、"组织"或"跟踪进度"
- 请求结构化工作
- 进行多步骤研究

### 手动使用

你也可以明确要求使用规划工作流：

```
"使用规划工作流来研究 TypeScript 的优势并写一份总结"
```

Cursor 将自动：
1. 创建 `task_plan.md`
2. 创建 `notes.md`
3. 按阶段执行任务
4. 更新进度
5. 创建最终交付物

## 📊 Manus 原则实现

| 原则 | 实现方式 |
|------|---------|
| **文件系统作为内存** | 存储在文件中，而非上下文中 |
| **注意力操作** | 决策前重新读取 `task_plan.md` |
| **错误持久化** | 在计划文件中记录失败 |
| **目标跟踪** | 复选框显示进度 |
| **仅追加上下文** | 永不修改历史，只追加 |

## 🎯 使用场景

### ✅ 适合使用

- 多步骤任务（3+ 步骤）
- 研究任务
- 构建/创建项目
- 跨越多个工具调用的任务
- 需要组织的任何任务

### ❌ 不适合使用

- 简单问题
- 单文件编辑
- 快速查找
- 一次性查询

## 📁 文件组织建议

### 项目级使用

```
your-project/
├── task_plan.md
├── notes.md
├── docs/
│   └── planning/
│       ├── task_plan.md
│       └── notes.md
└── [其他项目文件]
```

### 全局模板

```
planning-with-files-cursor/
├── docs/
│   └── planning/
│       ├── task_plan_template.md
│       └── notes_template.md
└── [其他文件]
```

## 🔄 工作流最佳实践

### 1. 始终从计划开始
在开始复杂任务前，先创建 `task_plan.md`。

### 2. 定期更新进度
每完成一个阶段，立即更新复选框和状态。

### 3. 记录所有发现
不要依赖上下文记忆，将所有重要信息写入 `notes.md`。

### 4. 重新读取计划
在做出重要决策前，重新读取 `task_plan.md` 以保持目标清晰。

### 5. 记录问题和解决方案
在 `notes.md` 中记录遇到的问题和解决方案，避免重复错误。

### 6. 维护项目文档同步
在重要里程碑和任务完成时，检查并更新项目级别的文档（如 README.md），确保文档反映最新状态。

### 7. 自动执行，减少确认
- 根据 `task_plan.md` 中的 `(CURRENT)` 标记自动判断当前阶段
- 直接执行当前阶段的任务，不要频繁询问用户确认
- 只有在遇到无法解决的问题或需要重大决策时才询问用户
- 完成阶段后自动进入下一阶段，不要询问是否继续

## 📚 示例工作流

### 示例：研究任务

**任务**: "研究 TypeScript 的优势并写一份总结"

**工作流**:

1. **创建计划** (`task_plan.md`)
   ```markdown
   # 任务计划：TypeScript 优势研究
   
   ## 🎯 项目目标
   创建一份关于 TypeScript 优势的研究总结
   
   ## 📋 项目阶段
   - [x] Phase 1: 创建计划 ✅
   - [ ] Phase 2: 研究和收集资料 (CURRENT)
   - [ ] Phase 3: 综合发现
   - [ ] Phase 4: 交付总结
   ```

2. **进行研究** → 保存到 `notes.md`
   ```markdown
   ## 🔍 研究内容
   - TypeScript 提供静态类型检查
   - 更好的 IDE 支持
   - 编译时错误检测
   ```

3. **更新计划** → 标记 Phase 2 完成

4. **创建交付物** → `typescript_benefits.md`

5. **更新计划** → 标记所有阶段完成

## 🚀 快速开始

1. **安装规划工作流**（待实现）
   ```bash
   # 运行安装脚本
   ./install/install.ps1  # Windows
   ./install/install.sh   # Linux/macOS
   ```

2. **开始使用**
   - 在 Cursor 中开始复杂任务
   - 工作流会自动激活
   - 或明确要求："使用规划工作流..."

3. **查看进度**
   - 打开 `task_plan.md` 查看当前进度
   - 打开 `notes.md` 查看研究笔记

## 📖 参考资源

- [planning-with-files](https://github.com/OthmanAdi/planning-with-files) - 原始项目
- [Manus AI](https://manus.ai) - 工作流模式来源
- [Context Engineering for AI Agents](https://context.engineering) - 上下文工程原理

---

**创建时间**: 2026-01-07  
**版本**: v1.0  
**项目**: Planning with Files for Cursor

